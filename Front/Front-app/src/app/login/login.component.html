<!-- Pagina di login: raccoglie credenziali e avvia l'autenticazione. -->
<div class="page-center">
  <mat-card appearance="outlined" class="panel">
    <mat-card-header>
      <mat-card-title class="text-title">Login</mat-card-title>
      <mat-card-subtitle class="text-subtitle">Inserisci le tue credenziali</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="content">
      <mat-form-field appearance="outline">
        <mat-label>Username</mat-label>
        <input
          matInput
          [(ngModel)]="username"
          [disabled]="loading"
          (keyup.enter)="doLogin()"
        />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input
          matInput
          type="password"
          [(ngModel)]="password"
          [disabled]="loading"
          (keyup.enter)="doLogin()"
        />
      </mat-form-field>

      <button
        mat-flat-button
        class="text-label text-on-accent btn-tonal-cta"
        type="button"
        (click)="doLogin()"
        [disabled]="loading || !username || !password"
      >
        <span class="text-label text-on-accent" *ngIf="!loading">Accedi</span>
        <span *ngIf="loading" class="loading-inline text-label text-on-accent">
          <mat-spinner diameter="18"></mat-spinner>
          Accesso in corso...
        </span>
      </button>

      <p *ngIf="error" class="error-text text-feedback-error">{{ error }}</p>
    </mat-card-content>

    <mat-card-actions align="end">
      <a mat-flat-button class="text-label text-on-accent btn-tonal" routerLink="/">Torna alla home</a>
    </mat-card-actions>
  </mat-card>
</div>
