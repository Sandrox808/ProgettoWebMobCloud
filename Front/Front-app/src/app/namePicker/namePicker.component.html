<!-- Pagina operativa: mostra il turno corrente, la settimana e le azioni sulla coda. -->
<div class="page-center">
  <mat-card appearance="outlined" class="panel">
    <mat-card-header>
      <mat-card-subtitle class="current-turn">
        <span class="current-turn-label">Oggi Ã¨ {{ currentDayLabel }}, tocca a</span>
        <span class="current-turn-name">{{ currentName || 'Nessuno' }}</span>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="content">
      <mat-chip-set *ngIf="vacationNames.length" aria-label="Utenti in vacanza">
        <mat-chip disabled *ngFor="let name of vacationNames">{{ name }}</mat-chip>
      </mat-chip-set>

      <div class="actions-row">
        <button
          mat-flat-button
          class="action-btn action-btn-tertiary text-label"
          type="button"
          (click)="toggleVacation()"
          [disabled]="actionLoading"
        >
          Vacanza
        </button>
        <button
          mat-flat-button
          class="action-btn action-btn-secondary text-label"
          type="button"
          (click)="markSkip()"
          [disabled]="actionLoading"
        >
          Salta
        </button>
        <button
          mat-flat-button
          class="action-btn action-btn-primary text-label"
          type="button"
          (click)="markDone()"
          [disabled]="actionLoading || !isMyTurn || isOnVacation"
        >
          Lavato
        </button>
      </div>

      <mat-progress-bar *ngIf="actionLoading || loading" mode="indeterminate"></mat-progress-bar>
      <p *ngIf="actionLoading" class="hint-text text-caption">Aggiornamento in corso: {{ actionLabel }}...</p>

      <h3 class="week-title">Restante settimana</h3>
      <mat-list class="week-list">
        <mat-list-item class="week-item" *ngFor="let item of weekList">
          <span matListItemTitle class="text-body-strong">{{ item.name }}</span>
          <span matListItemLine class="text-caption">{{ item.dayLabel }}</span>
        </mat-list-item>
      </mat-list>

      <p *ngIf="message" class="error-text text-feedback-error">{{ message }}</p>
    </mat-card-content>
  </mat-card>
</div>
